import streamlit as st

# ---------------------------
# 여행 데이터 (더 많은 나라 추가)
# ---------------------------
travel_data = {
    "일본": {
        "flag": "🇯🇵",
        "만족도": 4.7,
        "도시": {"도쿄": ["요코하마", "가마쿠라", "하코네"], "오사카": ["교토", "나라", "고베"]},
        "음식": {"스시 🍣": ["스시잔마이", "긴자 규베에", "스시 사이토"], "라멘 🍜": ["이치란 라멘", "잇푸도", "라멘 지로"]},
        "불편한점": ["영어 소통 어려움", "교통비 비쌈", "현금 사용 비율 높음"],
        "위생": "대체로 매우 깨끗하며, 음식 위생 관리도 철저합니다.",
        "문화": "애니메이션, 온천 문화, 전통 다도 문화가 유명합니다.",
        "꼭 지켜야 하는 문화": ["대중교통에서 통화 자제", "줄 서기 문화 엄격", "쓰레기 무단투기 금지"]
    },
    "태국": {
        "flag": "🇹🇭",
        "만족도": 4.4,
        "도시": {"방콕": ["아유타야", "파타야", "깐짜나부리"], "푸켓": ["피피섬", "카오락", "팡아"]},
        "음식": {"팟타이 🍜": ["팁사마이", "쏨땀 누아", "반칸틀라"], "똠얌꿍 🍲": ["파뚜 타이", "크루아 아프솜", "소이 라멘"]},
        "불편한점": ["더운 날씨", "교통 혼잡", "위생 문제"],
        "위생": "일부 길거리 음식은 위생에 주의가 필요합니다.",
        "문화": "불교 문화가 생활 전반에 깊이 스며 있으며 사원이 많습니다.",
        "꼭 지켜야 하는 문화": ["사원 방문 시 복장 단정히", "왕실 비하 금지", "머리 쓰다듬기 금지"]
    },
    "베트남": {
        "flag": "🇻🇳",
        "만족도": 4.5,
        "도시": {"하노이": ["하롱베이", "닌빈", "사파"], "호치민": ["메콩델타", "붕따우", "쿠치터널"]},
        "음식": {"쌀국수 🍜": ["포틴", "포 2000", "꽌안응온"], "반미 🥖": ["반미퐁리", "반미후엉", "반미홍화"]},
        "불편한점": ["오토바이 교통 위험", "언어 장벽", "날씨 더움"],
        "위생": "대도시는 깨끗하지만 길거리 음식은 주의 필요.",
        "문화": "프랑스 식민지 영향으로 커피 문화가 발달.",
        "꼭 지켜야 하는 문화": ["길 건널 때 오토바이 주의", "식사 시 젓가락 예절 지키기", "노인 존중"]
    },
    "미국": {
        "flag": "🇺🇸",
        "만족도": 4.3,
        "도시": {"뉴욕": ["뉴저지", "필라델피아", "보스턴"], "LA": ["샌디에이고", "라스베가스", "샌프란시스코"]},
        "음식": {"햄버거 🍔": ["셰이크쉑", "파이브가이즈", "인앤아웃"], "스테이크 🥩": ["피터 루거", "케인스", "울프강"]},
        "불편한점": ["팁 문화 부담", "총기 안전 문제", "물가 비쌈"],
        "위생": "대체로 위생적이며 수돗물도 마실 수 있음.",
        "문화": "다양한 인종과 문화가 공존하며 자유로운 분위기.",
        "꼭 지켜야 하는 문화": ["팁 문화 지키기", "개인 공간 존중", "총기 관련 장소 주의"]
    },
    "프랑스": {
        "flag": "🇫🇷",
        "만족도": 4.5,
        "도시": {"파리": ["베르사유", "지베르니", "몽생미셸"], "니스": ["칸", "모나코", "앙티브"]},
        "음식": {"크루아상 🥐": ["라뒤레", "앙젤리나", "폴"], "와인 🍷": ["샹브레 와인바", "라 카브", "르 와인 숍"]},
        "불편한점": ["소매치기 주의", "물가 비쌈", "프랑스어 소통 필요"],
        "위생": "대체로 위생적이나 일부 공공 화장실은 불편할 수 있음.",
        "문화": "예술과 낭만의 중심지, 카페 문화 발달.",
        "꼭 지켜야 하는 문화": ["프랑스어 기본 인사 사용", "카페에서 큰 소리 금지", "시간 엄수"]
    },
    "이탈리아": {
        "flag": "🇮🇹",
        "만족도": 4.6,
        "도시": {"로마": ["바티칸시티", "티볼리", "오스티아"], "밀라노": ["코모", "베르가모", "토리노"]},
        "음식": {"피자 🍕": ["다 미켈레", "소르빌로", "피제리아 브란디"], "파스타 🍝": ["라 페르골라", "로시올리", "트라토리아 다 엔조"]},
        "불편한점": ["소매치기 주의", "대중교통 파업", "관광객 많음"],
        "위생": "대체로 양호하나 관광지 공공 화장실은 불편할 수 있음.",
        "문화": "로마 제국 유적, 예술과 패션의 본고장.",
        "꼭 지켜야 하는 문화": ["교회 방문 시 복장 단정히", "식사 중 자리 이동 금지", "현지인과 인사 시 볼키스"]
    },
    "스페인": {
        "flag": "🇪🇸",
        "만족도": 4.5,
        "도시": {"바르셀로나": ["몬세라트", "시체스", "타라고나"], "마드리드": ["톨레도", "세고비아", "아빌라"]},
        "음식": {"타파스 🥘": ["엘 시드라", "라 보데가", "엘 퀴뻬"], "파에야 🥘": ["라 바라카", "카사 루시아", "엘 마리노"]},
        "불편한점": ["스페인어 필수", "늦은 저녁 문화 적응 필요", "소매치기 많음"],
        "위생": "식당과 숙소는 위생적이지만 길거리 음식은 주의.",
        "문화": "플라멩코, 축구, 시에스타(낮잠 문화) 유명.",
        "꼭 지켜야 하는 문화": ["점심 후 낮잠 문화 존중", "저녁 식사는 늦게 시작", "플라멩코 공연 중 방해 금지"]
    }
}

# ---------------------------
# Streamlit UI
# ---------------------------
st.set_page_config(page_title="해외여행 추천 웹", page_icon="🌍", layout="centered")
st.markdown("<h1 style='text-align: center; font-size: 50px;'>🌍 해외여행 추천 가이드</h1>", unsafe_allow_html=True)

st.markdown("<h2 style='font-size: 30px;'>어느 나라를 원하시나요? ✈️</h2>", unsafe_allow_html=True)

# 객관식 나라 선택 (라디오 버튼, 큰 글씨 적용)
country = st.radio(
    "",
    list(travel_data.keys()),
    format_func=lambda x: f"{travel_data[x]['flag']} {x}",
    horizontal=False
)

if country:
    data = travel_data[country]
    st.markdown(f"<h2 style='font-size: 35px;'>{data['flag']} {country} 여행 정보</h2>", unsafe_allow_html=True)

    # 만족도
    stars = "⭐" * int(data["만족도"]) + ("✨" if data["만족도"] % 1 >= 0.5 else "")
    st.metric("여행 만족도 (5점 만점)", f"{data['만족도']} ({stars})")

    # 도시 & 소도시
    st.markdown("<h3 style='font-size: 25px;'>📍 추천 도시 & 소도시</h3>", unsafe_allow_html=True)
    for city, small_cities in data["도시"].items():
        st.markdown(f"- <b>{city}</b> → {', '.join(small_cities)}", unsafe_allow_html=True)

    # 음식 & 음식점
    st.markdown("<h3 style='font-size: 25px;'>🍽️ 추천 음식 & 음식점</h3>", unsafe_allow_html=True)
    for food, restaurants in data["음식"].items():
        st.markdown(f"- <b>{food}</b>", unsafe_allow_html=True)
        st.markdown("\n".join([f"  • {r}" for r in restaurants]))

    # 불편한 점
    st.markdown("<h3 style='font-size: 25px;'>⚠️ 여행 시 불편한 점</h3>", unsafe_allow_html=True)
    for issue in data["불편한점"]:
        st.warning(issue)

    # 위생
    st.markdown("<h3 style='font-size: 25px;'>🧼 위생</h3>", unsafe_allow_html=True)
    st.info(data["위생"])

    # 문화
    st.markdown("<h3 style='font-size: 25px;'>🎭 문화</h3>", unsafe_allow_html=True)
    st.write(data["문화"])

    # 꼭 지켜야 하는 문화
    st.markdown("<h3 style='font-size: 25px;'>📌 꼭 지켜야 하는 문화</h3>", unsafe_allow_html=True)
    for rule in data["꼭 지켜야 하는 문화"]:
        st.success(rule)
