import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt

# ---------------------------
# ìƒ˜í”Œ ë°ì´í„° (ì‹¤ì œ APIë‚˜ DBë¡œ ëŒ€ì²´ ê°€ëŠ¥)
# ---------------------------
country_data = {
    "ì¼ë³¸": {"ë§Œì¡±ë„": 4.7, "ì¶”ì²œì§€": ["ë„ì¿„", "ì˜¤ì‚¬ì¹´", "êµí† ", "í›„ì¿ ì˜¤ì¹´"]},
    "í”„ë‘ìŠ¤": {"ë§Œì¡±ë„": 4.5, "ì¶”ì²œì§€": ["íŒŒë¦¬", "ë‹ˆìŠ¤", "ë¦¬ì˜¹", "ë³´ë¥´ë„"]},
    "ì´íƒˆë¦¬ì•„": {"ë§Œì¡±ë„": 4.6, "ì¶”ì²œì§€": ["ë¡œë§ˆ", "í”¼ë Œì²´", "ë°€ë¼ë…¸", "ë² ë„¤ì¹˜ì•„"]},
    "íƒœêµ­": {"ë§Œì¡±ë„": 4.4, "ì¶”ì²œì§€": ["ë°©ì½•", "í‘¸ì¼“", "ì¹˜ì•™ë§ˆì´", "íŒŒíƒ€ì•¼"]},
    "ë¯¸êµ­": {"ë§Œì¡±ë„": 4.3, "ì¶”ì²œì§€": ["ë‰´ìš•", "ë¼ìŠ¤ë² ê°€ìŠ¤", "ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ë§ˆì´ì• ë¯¸"]},
    "ìŠ¤í˜ì¸": {"ë§Œì¡±ë„": 4.5, "ì¶”ì²œì§€": ["ë°”ë¥´ì…€ë¡œë‚˜", "ë§ˆë“œë¦¬ë“œ", "ì„¸ë¹„ì•¼", "ë°œë Œì‹œì•„"]},
}

# ---------------------------
# Streamlit UI
# ---------------------------
st.set_page_config(page_title="í•´ì™¸ì—¬í–‰ ì¶”ì²œ ì›¹", page_icon="ğŸŒ", layout="centered")

st.title("ğŸŒ í•´ì™¸ì—¬í–‰ ë§Œì¡±ë„ & ì—¬í–‰ì§€ ì¶”ì²œ")
st.write("âœˆï¸ ê°€ê³  ì‹¶ì€ ë‚˜ë¼ë¥¼ ì„ íƒí•˜ë©´ ì—¬í–‰ ë§Œì¡±ë„ì™€ ì¶”ì²œ ì—¬í–‰ì§€ë¥¼ ì•Œë ¤ë“œë ¤ìš”!")

# ë‚˜ë¼ ì„ íƒ
country = st.selectbox("ê°€ê³  ì‹¶ì€ ë‚˜ë¼ë¥¼ ê³¨ë¼ë³´ì„¸ìš”:", list(country_data.keys()))

if country:
    st.subheader(f"ğŸ‡¨ğŸ‡­ {country} ì—¬í–‰ ì •ë³´")

    # ë§Œì¡±ë„ ì¶œë ¥
    rating = country_data[country]["ë§Œì¡±ë„"]
    st.metric(label="ì—¬í–‰ ë§Œì¡±ë„ (5ì  ë§Œì )", value=f"{rating}")

    # ì¶”ì²œ ì—¬í–‰ì§€ ë¦¬ìŠ¤íŠ¸
    st.write("ğŸ“ ì¶”ì²œ ì—¬í–‰ì§€:")
    for place in country_data[country]["ì¶”ì²œì§€"]:
        st.write(f"- {place}")

    # ë§Œì¡±ë„ ì‹œê°í™” (ë¹„êµ ê·¸ë˜í”„)
    st.subheader("ğŸ“Š ë‚˜ë¼ë³„ ì—¬í–‰ ë§Œì¡±ë„ ë¹„êµ")
    df = pd.DataFrame({
        "ë‚˜ë¼": list(country_data.keys()),
        "ë§Œì¡±ë„": [country_data[c]["ë§Œì¡±ë„"] for c in country_data]
    })

    fig, ax = plt.subplots()
    ax.bar(df["ë‚˜ë¼"], df["ë§Œì¡±ë„"])
    ax.set_ylabel("ë§Œì¡±ë„ (5ì  ë§Œì )")
    ax.set_title("ë‚˜ë¼ë³„ ì—¬í–‰ ë§Œì¡±ë„")
    st.pyplot(fig)

st.write("---")
st.info("ğŸ’¡ ì‹¤ì œ ë°ì´í„°ë¥¼ ì—°ê²°í•˜ë©´ ë” í˜„ì‹¤ì ì¸ ì—¬í–‰ ì¶”ì²œ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”! ğŸŒ")
